<!DOCTYPE html>
<html>
<head>
<title>Kahoot bot flooder</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
body, h1,h2,h3,h4,h5,h6 {font-family: "Montserrat", sans-serif}
.w3-row-padding img {margin-bottom: 12px}
/* Set the width of the sidebar to 120px */
.w3-sidebar {width: 120px;background: #222;}
/* Add a left margin to the "page content" that matches the width of the sidebar (120px) */
#main {margin-left: 120px}
/* Remove margins from "page content" on small screens */
@media only screen and (max-width: 600px) {#main {margin-left: 0}}
</style>
</head>
<body class="w3-black">

<!-- Icon Bar (Sidebar - hidden on small screens) -->
<nav class="w3-sidebar w3-bar-block w3-small w3-hide-small w3-center">
  <!-- Avatar image in top left corner -->
  <img src="/resources/smoke.png" style="width:100%">
  <a href="#" class="w3-bar-item w3-button w3-padding-large w3-black">
    <i class="fa fa-home w3-xxlarge"></i>
    <p>HOME</p>
  </a>
  <a href="#flood" class="w3-bar-item w3-button w3-padding-large w3-hover-black">
    <i class="fa fa-user w3-xxlarge"></i>
    <p>FLOODER</p>
  </a>
</nav>

<!-- Navbar on small screens (Hidden on medium and large screens) -->
<div class="w3-top w3-hide-large w3-hide-medium" id="myNavbar">
  <div class="w3-bar w3-black w3-opacity w3-hover-opacity-off w3-center w3-small">
    <a href="#" class="w3-bar-item w3-button" style="width:25% !important">HOME</a>
    <a href="#flood" class="w3-bar-item w3-button" style="width:25% !important">FLOODER</a>
  </div>
</div>

<!-- Page Content -->
<div class="w3-padding-large" id="main">
  <!-- Header/Home -->
  <header class="w3-container w3-padding-32 w3-center w3-black" id="home">
    <h1 class="w3-jumbo"><span class="w3-hide-small"></span> Kahoot Flooder</h1>
    <p>Made by Aiden E.</p>
    <img src="/resources/kahoot.jpeg" alt="boy" class="w3-image" width="35%" height="35%">
  </header>

  <!-- About Section -->
  <div class="w3-content w3-justify w3-text-grey w3-padding-64" id="about">
    <h2 class="w3-text-light-grey">My Name</h2>
    <hr style="width:200px" class="w3-opacity">
    <p>
		Deploy hundreds of bots to infiltrate and take
      over any public Kahoot game!<br>
      Use wisely... This tool is not responsible for any
      consequences from use.
    </p>
	  <!--
    <h3 class="w3-padding-16 w3-text-light-grey">My Skills</h3>
    <p class="w3-wide">Photography</p>
    <div class="w3-white">
      <div class="w3-dark-grey" style="height:28px;width:95%"></div>
    </div>
    <p class="w3-wide">Web Design</p>
    <div class="w3-white">
      <div class="w3-dark-grey" style="height:28px;width:85%"></div>
    </div>
    <p class="w3-wide">Photoshop</p>
    <div class="w3-white">
      <div class="w3-dark-grey" style="height:28px;width:80%"></div>
    </div><br>
    
    <div class="w3-row w3-center w3-padding-16 w3-section w3-light-grey">
      <div class="w3-quarter w3-section">
        <span class="w3-xlarge">11+</span><br>
        Partners
      </div>
      <div class="w3-quarter w3-section">
        <span class="w3-xlarge">55+</span><br>
        Projects Done
      </div>
      <div class="w3-quarter w3-section">
        <span class="w3-xlarge">89+</span><br>
        Happy Clients
      </div>
      <div class="w3-quarter w3-section">
        <span class="w3-xlarge">150+</span><br>
        Meetings
      </div>
    </div>

    <button class="w3-button w3-light-grey w3-padding-large w3-section">
      <i class="fa fa-download"></i> Download Resume
    </button> -->
    
    <!-- Grid for pricing tables -->
    <h3 class="w3-padding-16 w3-text-light-grey" id="flood">Flooder</h3>
	  <label id="progress" hidden>Sending bots: <progress id="bar" value="0" max="100"></progress></label>
	<hr style="width:200px" class="w3-opacity">
    <div class="w3-row-padding" style="margin:0 -16px">
		

		<container class="w3-hald w3-margin-bottom">
			<div class="w3-half w3-margin-bottom">
    	    <ul class="w3-ul w3-white w3-center w3-opacity w3-hover-opacity-off">
			
    	      <li class="w3-dark-grey w3-xlarge w3-padding-32">Flooder</li>
    	<div class='form'>
    	  Game PIN:<br>
    	  <input class='input' type='number' id='pin' placeholder=
    	  '0000000'><br>
    	  <span class='error' id='pinError'></span><br>
    	  Bot Names, separated by commas:<br>
    	  (Each bot will choose a random one of these names)<br>
    	  <input class='input' type='text' id='name' placeholder=
    	  'Joe,Bob,Billy' value='Joe,Bob,Billy'><br>
    	  <span class='error' id='nameError'></span><br>
    	  <br>
    	  Number of bots:<br>
    	  <input class='input' type='number' id='num' placeholder='10'
    	  value='10'><br>
    	  <span class='error' id='numError'></span><br>
		  <input type="checkbox" id="ctrl" name="ctrl1">
		  <label for="ctrl1"> Control bot answers?</label><br>
    	</div>
				<li class="w3-light-grey w3-padding-24">
    	        <button class="button w3-button w3-white w3-padding-large w3-hover-black" id="button">Flood</button>
					<span id='success' class='success'></span>
    	      </li>
    	    </ul>
		</container>	
	</div>

	<div class="w3-half w3-margin-bottom">
        <ul class="w3-ul w3-white w3-center w3-opacity w3-hover-opacity-off">
			
          <li class="w3-dark-grey w3-xlarge w3-padding-32">Console</li>
          <ul id="console">
		  </ul>
          <li class="w3-light-grey w3-padding-24">
			<label for="quantity">
				Quantity 1-4,
				5 for random:
			</label>
			<input type="number" id="quantity" name="quantity" min="1" max="5">
            <button class="w3-button w3-white w3-padding-large w3-hover-black" id="send">Send</button>
          </li>
        </ul>
      </div>
	<!--	
      <div class="w3-half w3-margin-bottom">
        <ul class="w3-ul w3-white w3-center w3-opacity w3-hover-opacity-off">
			
          <li class="w3-dark-grey w3-xlarge w3-padding-32">Basic</li>
          <li class="w3-padding-16">Web Design</li>
          <li class="w3-padding-16">Photography</li>
          <li class="w3-padding-16">5GB Storage</li>
          <li class="w3-padding-16">Mail Support</li>
          <li class="w3-padding-16">
            <h2>$ 10</h2>
            <span class="w3-opacity">per month</span>
          </li>
          <li class="w3-light-grey w3-padding-24">
            <button class="w3-button w3-white w3-padding-large w3-hover-black">Sign Up</button>
          </li>
        </ul>
      </div>
	  -->
    <!-- End Grid/Pricing tables -->
    </div>
  <!-- End About Section -->
  </div>

<!-- END PAGE CONTENT -->
</div>
<script type="module">																																										
	import { io } from "https://cdn.socket.io/4.4.1/socket.io.esm.min.js";
	window.socket = io();
	const socket = window.socket
	socket.emit('clientMessage', 'Client connected')
	document.getElementById('button').addEventListener("click", go);
	

	function print(msg) {
		const con = document.getElementById('console')
		let numb = document.getElementById("console").children.length;
		if (numb == 8) {
			con.removeChild(con.firstElementChild)
		}
		let log = document.createElement('li')
		log.appendChild(document.createTextNode(msg))
		con.appendChild(log)
	}

	socket.on('console', (data) => {
		console.log(data)
		print(data)
	})

	

	
	
	socket.on('ans1', async (a, callback) => {
		await new Promise((resolve, reject) => {
    		document.getElementById('send').addEventListener('click', function(e) {
        		/// do something to process the answer
        		resolve();
    		}, {once: true});
  		});
		let answer = document.getElementById('quantity').value.toString()
		console.log("submit")
		socket.emit('ans2', answer)
	})
	

	function go() {
		var valid = true;
		var pin = document.getElementById('pin').value.toString()
		if (pin.length <= 2 || pin.length > 10) {
		    document.getElementById('pinError').innerHTML = 'Error: Invalid Game PIN<br>';
		    valid = false;
		} else {
		    document.getElementById('pinError').innerHTML = '';
		}
		var name = document.getElementById('name').value.replace(/\,\s/g, ',');
		if (name.length < 1) {
		    document.getElementById('nameError').innerHTML = 'Error: Enter at least 1 name<br>';
		    valid = false;
		} else {
		    document.getElementById('nameError').innerHTML = '';
		}
		var num = Number(document.getElementById('num').value);
		if (num < 1 || num > 2000) {
		    document.getElementById('numError').innerHTML = 'Error: Must be between 1-2000<br>';
		    valid = false;
		} else {
		    document.getElementById('numError').innerHTML = '';
		}
		if (valid) {
			document.getElementById('progress').removeAttribute('hidden')
		    document.getElementById('button').innerHTML = ' Joining... ';
		    document.getElementById('success').innerHTML = '';
		    let send = `{ "uid":"${Date.now()}", "pin":"${pin}", "names":"${encodeURIComponent(name)}", "numBots":"${num}", "ctrl":"${document.getElementById('ctrl').checked}" }`
			console.log(send)
			socket.emit('flood', send)
		}

		socket.on('flooded', () => {
			document.getElementById('bar').value = '100'
			document.getElementById('button').innerHTML = 'Flood';
		    document.getElementById('success').innerHTML = 'Success';
		})
	}
  </script>
</body>
</html>
